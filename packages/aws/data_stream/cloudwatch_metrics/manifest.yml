title: AWS CloudWatch metrics
type: metrics
streams:
  - input: aws/metrics
    enabled: false
    vars:
      - name: period
        type: text
        title: Collection Period
        multi: false
        required: true
        show_user: true
        default: 300s
      - name: data_granularity
        type: text
        title: Data Granularity
        multi: false
        required: false
        show_user: false
      - name: include_linked_accounts
        type: bool
        title: Include Linked Accounts
        multi: false
        required: false
        show_user: false
        default: false
        description: When include_linked_accounts is set to true, CloudWatch metrics will be collected from both linked accounts and the monitoring account. Default is false.
      - name: regions
        type: text
        title: Regions
        multi: true
        required: false
        show_user: true
      - name: latency
        type: text
        title: Latency
        multi: false
        required: false
        show_user: false
      - name: metrics
        type: yaml
        title: Metrics
        multi: false
        required: true
        show_user: true
        default: |
          - namespace: AWS/EC2
            resource_type: ec2:instance
            name:
              - CPUUtilization
              - DiskWriteOps
            statistic:
              - Average
              - Maximum
            # dimensions:
             # - name: InstanceId
                # value: i-123456
            # tags:
              # - key: created-by
                # value: foo
      - name: processors
        type: yaml
        title: Processors
        multi: false
        required: false
        show_user: false
        description: >
          Processors are used to reduce the number of fields in the exported event or to enhance the event with metadata. This executes in the agent before the logs are parsed. See [Processors](https://www.elastic.co/guide/en/beats/filebeat/current/filtering-and-enhancing-data.html) for details.
    title: AWS CloudWatch metrics
    description: Collect AWS CloudWatch metrics
